{"version":3,"sources":["webpack:///C:/Users/admin/Desktop/movie-app/pages/city-select/city-select.vue?671a","webpack:///C:/Users/admin/Desktop/movie-app/pages/city-select/city-select.vue?eb21","webpack:///C:/Users/admin/Desktop/movie-app/pages/city-select/city-select.vue?6cfe","webpack:///C:/Users/admin/Desktop/movie-app/pages/city-select/city-select.vue?14c7","webpack:///C:/Users/admin/Desktop/movie-app/pages/city-select/city-select.vue?1890","webpack:///C:/Users/admin/Desktop/movie-app/pages/city-select/city-select.vue?d3bc","webpack:///C:/Users/admin/Desktop/movie-app/pages/city-select/city-select.vue"],"names":["app","getApp","name","components","empty","data","citylist","navTop","navItemHeight","sections","inNavbar","result","searchValue","onLoad","normalizeCityList","citys","onReady","query","uni","createSelectorQuery","select","boundingClientRect","selectAll","fields","dataset","size","rect","exec","res","Y","forEach","item","push","top","height","title","onUnload","hideToast","onPageScroll","e","scrollTop","handlePageScroll","watch","val","value","trim","toUpperCase","filter","length","city_pre","city_name","includes","city_pinyin","city_short","methods","showToast","icon","duration","map","key","items","list","Object","entries","index","sort","a","b","charCodeAt","hot","style","slice","unshift","current","$store","state","userLocation","status","city","find","cityName","selectCity","_this","showModal","content","confirmText","success","confirm","openSetting","authSetting","initPage","switchTab","url","navSelect","pageScrollTo","handleTouchmove","Math","floor","changedTouches","clientY","handleTouchstart","handleTouchend"],"mappings":"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","file":"pages/city-select/city-select.js","sourcesContent":["import mod from \"-!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./city-select.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./city-select.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","import { render, staticRenderFns } from \"./city-select.vue?vue&type=template&id=027f0f34&\"\nimport script from \"./city-select.vue?vue&type=script&lang=js&\"\nexport * from \"./city-select.vue?vue&type=script&lang=js&\"\nimport style0 from \"./city-select.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\admin\\\\Downloads\\\\HBuilderX.2.2.2.20190816\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('027f0f34', component.options)\n    } else {\n      api.reload('027f0f34', component.options)\n    }\n    module.hot.accept(\"./city-select.vue?vue&type=template&id=027f0f34&\", function () {\n      api.rerender('027f0f34', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Desktop/movie-app/pages/city-select/city-select.vue\"\nexport default component.exports","export * from \"-!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./city-select.vue?vue&type=template&id=027f0f34&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./city-select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Downloads/HBuilderX.2.2.2.20190816/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./city-select.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport empty from '@/components/empty.vue'\nimport {throttle} from '../../utils/util.js'\nimport {citys} from '../../utils/citys.js'\nimport {\n\tmapState,\n\tmapMutations\n} from 'vuex';\nconst app = getApp()\nexport default {\n\tname: 'city-select',\n\tcomponents: {\n\t\tempty\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcitylist: [],\n\t\t\tnavTop: 0, //侧边导航距离窗口顶部的距离,\n\t\t\tnavItemHeight: 0, //侧边导航项的高度\n\t\t\tsections: [], //所有section，保存每个section的节点在文档的位置信息\n\t\t\tinNavbar: false, //手指是否在侧边导航，主要是区别后面wx.pageScrollTo触发的滚动还是直接触发的滚动\n\t\t\tresult: [] ,//城市查询结果列表\n\t\t\tsearchValue:'' //搜索关键字\n\t\t};\n\t},\n\tonLoad() {\n\t\tthis.normalizeCityList(citys)\n\t},\n\tonReady() {\n\t\tconst query = uni.createSelectorQuery()\n\t\tquery.select('.citylist-nav').boundingClientRect();\n\t\tquery.select('.citylist-nav-item').boundingClientRect();\n\t\tquery.selectAll('.section').fields({\n\t\t\tdataset: true,\n\t\t\tsize: true,\n\t\t\trect: true\n\t\t});\n\t\tquery.exec((res) => {\n\t\t\tlet sections = []\n\t\t\tlet Y = 0\n\t\t\tres[2].forEach(item => {\n\t\t\t\tsections.push({\n\t\t\t\t\ttop: Y,\n\t\t\t\t\theight: item.height,\n\t\t\t\t\ttitle: item.dataset.title\n\t\t\t\t})\n\t\t\t\tY += item.height\n\t\t\t})\n\t\t\tthis.navTop = res[0].top\n\t\t\tthis.navItemHeight = res[1].height\n\t\t\tthis.sections = sections\n\t\t})\n\t},\n\tonUnload() {\n\t\tuni.hideToast()\n\t},\n\tonPageScroll: throttle(function(e) {\n\t\tif (this.inNavbar || this.searchValue) {\n\t\t\treturn // 如果是侧边栏的pageScrollTo触发的滚动则不执行下面的程序\n\t\t}\n\t\tconst sections = this.sections\n\t\tconst scrollTop = e.scrollTop\n\t\tthis.handlePageScroll(sections, scrollTop)\n\t}),\n\twatch:{\n\t\tsearchValue:function(val){\n\t\t\tconst value = val.trim().toUpperCase()\n\t\t\tlet result = []\n\t\t\tif (value) {\n\t\t\t\tresult = citys.filter(item => {\n\t\t\t\t\tif (value.length === 1 && value >= 'A' && value <= 'Z') {\n\t\t\t\t\t\treturn value === item.city_pre.toUpperCase()\n\t\t\t\t\t}\n\t\t\t\t\treturn item.city_name.includes(value) || item.city_pinyin.toUpperCase().includes(value) || item.city_short.toUpperCase()\n\t\t\t\t\t\t.includes(value)\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.result = result\n\t\t}\n\t},\n\tmethods: {\n\t\thandlePageScroll(sections, scrollTop) {\n\t\t\tfor (let item of sections) {\n\t\t\t\tif (scrollTop >= item.top && scrollTop < item.top + item.height) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: item.title,\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 500\n\t\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t//处理API返回的城市列表数据\n\t\tnormalizeCityList(citys) {\n\t\t\tlet map = {}\n\t\t\tcitys.forEach(item => {\n\t\t\t\tconst key = item.city_pre.toUpperCase()\n\t\t\t\t//如果没有该字母索引，就创建该字母索引\n\t\t\t\tif (!map[key]) {\n\t\t\t\t\tmap[key] = {\n\t\t\t\t\t\ttitle: key,\n\t\t\t\t\t\titems: []\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmap[key].items.push(item)\n\t\t\t})\n\t\t\tlet list = []\n\t\t\tfor (let [index, value] of Object.entries(map)) {\n\t\t\t\tlist.push(value)\n\t\t\t}\n\t\t\t//按字母顺序排序\n\t\t\tlist.sort((a, b) => a.title.charCodeAt(0) - b.title.charCodeAt(0))\n\t\t\t//创建热门城市\n\t\t\tconst hot = {\n\t\t\t\ttitle: '热门城市',\n\t\t\t\tindex: '热门',\n\t\t\t\tstyle: 'inline',\n\t\t\t\titems: citys.slice(0, 10)\n\t\t\t}\n\t\t\tlist.unshift(hot)\n\t\t\t//创建当前定位城市\n\t\t\tlet current = {\n\t\t\t\ttitle: '当前定位城市',\n\t\t\t\tindex: '定位',\n\t\t\t\tstyle: 'inline',\n\t\t\t\titems: []\n\t\t\t};\n\t\t\t// 判断是否获得用户定位城市\n\t\t\tif (this.$store.state.userLocation.status === 1) {\n\t\t\t\tlet city = citys.find(item => item.city_name === this.$store.state.userLocation.cityName) || {\n\t\t\t\t\tcity_name: '定位失败，请点击重试'\n\t\t\t\t}\n\t\t\t\tcurrent.items = [city]\n\t\t\t} else {\n\t\t\t\tcurrent.items = [{\n\t\t\t\t\tcity_name: '定位失败，请点击重试'\n\t\t\t\t}]\n\t\t\t}\n\t\t\tlist.unshift(current)\n\t\t\tthis.citylist = list\n\t\t},\n\t\t//点击城市的事件处理程序\n\t\tselectCity(cityName) {\n\t\t\tconst _this = this\n\t\t\tif (cityName === '定位失败，请点击重试') {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: '需要先授权定位才可获得您的位置信息',\n\t\t\t\t\tconfirmText: \"打开定位\",\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.openSetting({\n\t\t\t\t\t\t\t\tsuccess(data) {\n\t\t\t\t\t\t\t\t\tif (data.authSetting['scope.userLocation']) {\n\t\t\t\t\t\t\t\t\t\tapp.initPage()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '没有获取猫眼城市ID的API，所以暂不支持切换城市',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t_this.$store.state.selectCity = {\n\t\t\t\t\t\t\t\tcityName\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: '/pages/movie/movie'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t//侧边栏导航的点击事件处理\n\t\tnavSelect(index) {\n\t\t\tconst {\n\t\t\t\tcitylist,\n\t\t\t\tsections\n\t\t\t} = this\n\t\t\tuni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: citylist[index].title\n\t\t\t})\n\t\t\tuni.pageScrollTo({\n\t\t\t\tscrollTop: sections[index].top,\n\t\t\t\tduration: 0\n\t\t\t})\n\t\t},\n\t\t//在侧边栏上滑动的事件处理,使用函数节流优化\n\t\thandleTouchmove: throttle(function(e) {\n\t\t\tconst {\n\t\t\t\tnavTop,\n\t\t\t\tnavItemHeight,\n\t\t\t\tcitylist,\n\t\t\t\tsections\n\t\t\t} = this\n\t\t\tlet index = Math.floor((e.changedTouches[0].clientY - navTop) / navItemHeight)\n\t\t\tif (index < 0 || index > citylist.length - 1) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tuni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: citylist[index].title,\n\t\t\t\tduration: 500\n\t\t\t})\n\t\t\tuni.pageScrollTo({\n\t\t\t\tscrollTop: sections[index].top,\n\t\t\t\tduration: 0\n\t\t\t})\n\t\t}),\n\t\t//设置手指在侧边导航中\n\t\thandleTouchstart() {\n\t\t\tthis.inNavbar = true\n\t\t},\n\t\t//设置手指离开侧边导航中\n\t\thandleTouchend() {\n\t\t\tthis.inNavbar = false\n\t\t}\n\t}\n}\n"],"sourceRoot":""}